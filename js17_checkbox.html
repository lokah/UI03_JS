<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    
    #colorbox{

    width: 320px;
    height: 320px;
    position: relative;

    }
    #red, #green, #blue, #black{

    width: 150px;
    height: 150px;
    border: 1px solid black;
    position: absolute;
    }

    #green{left:160px;}
    #blue{top:160px;}
    #black{left: 160px; top : 160px;}

    </style>

    <script>
    
    function selectColor(){


        var chks = document.getElementsByName("chk");
        for(var i = 0; i<chks.length; i++){
            if(chks[i].checked){
                document.getElementById(chks[i].value).style.backgroundColor=chks[i].value;
            }else{
                document.getElementById(chks[i].value).style.backgroundColor ="";
                clearColor();
            }


        }
    }

    function clearColor() {
         //var colorbox = document.querySelectorAll('#colorbox > div'); 컬러도 없애준다.
        var chks = document.getElementsByName('chk');//노드 노드리스트
        for(var i = 0; i<chks.length; i++){
             //colorbox[i].style.backgroundColor='';
           chks[i].checked = false;
    }
    //selectBox(false);
    //document.getElementsByName('all')[0].checked = false;//이름은 배열이기 때문에 꼭 []인텍스를 추가해야 한다.
        document.getElementById('close').checked = false;
    }
       

    function selectBox(check) {
        var chks = document.getElementsByName('chk');
        for(var i = 0; i<chks.length; i++){

            chks[i].checked = check;
            //if(document.getElementsByName('all').checked){

                //document.getElementById(chks[i].value).checked;
            }
        }

    

    
    
    </script>
</head>
<body>
    

    <div id="colorbox">

        <div id="red">red</div>
        <div id="green">green</div>
        <div id="blue">blue</div>
        <div id="black">black</div>

    </div>

    <div id="base">

        <form>
            <input type="checkbox" name="all" id="close" onclick="selectBox(this.checked);">전체 선택<br>
            <input type="checkbox" name="chk" value="red">red <br>
            <input type="checkbox" name="chk" value="green">green <br>
            <input type="checkbox" name="chk" value="blue">blue <br>
            <input type="checkbox" name="chk" value="black">black <br>

            <input type="button" value="select" onclick="selectColor();"> <br>
            <input type="button" value="clear" onclick="clearColor();">
        </form>

    </div>

</body>
</html>